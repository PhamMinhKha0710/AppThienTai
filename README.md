<p align="center">
  <img src="assets/images/logo.png" alt="AppThienTai Logo" width="120"/>
</p>

<h1 align="center">ğŸŒŠ AppThienTai - á»¨ng Dá»¥ng Cá»©u Trá»£ ThiÃªn Tai</h1>

<p align="center">
  <strong>Káº¿t ná»‘i náº¡n nhÃ¢n vÃ  tÃ¬nh nguyá»‡n viÃªn trong cÃ¡c tÃ¬nh huá»‘ng thiÃªn tai kháº©n cáº¥p</strong>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Flutter-3.24.x-02569B?logo=flutter" alt="Flutter"/>
  <img src="https://img.shields.io/badge/Dart-3.5.x-0175C2?logo=dart" alt="Dart"/>
  <img src="https://img.shields.io/badge/Python-3.9+-3776AB?logo=python" alt="Python"/>
  <img src="https://img.shields.io/badge/AI-XGBoost-FF6F00" alt="AI"/>
  <img src="https://img.shields.io/badge/Firebase-Backend-FFCA28?logo=firebase" alt="Firebase"/>
</p>

<p align="center">
  <a href="#-tÃ­nh-nÄƒng-chÃ­nh">TÃ­nh nÄƒng</a> â€¢
  <a href="#-kiáº¿n-trÃºc">Kiáº¿n trÃºc</a> â€¢
  <a href="#-cÃ i-Ä‘áº·t">CÃ i Ä‘áº·t</a> â€¢
  <a href="#-ai-service">AI Service</a> â€¢
  <a href="#-Ä‘Ã³ng-gÃ³p">ÄÃ³ng gÃ³p</a>
</p>

---

## ğŸ“± Giá»›i Thiá»‡u

**AppThienTai** lÃ  á»©ng dá»¥ng di Ä‘á»™ng cá»©u trá»£ thiÃªn tai Ä‘Æ°á»£c phÃ¡t triá»ƒn báº±ng Flutter, tÃ­ch há»£p AI Ä‘á»ƒ dá»± bÃ¡o rá»§i ro vÃ  há»— trá»£ ngÆ°á»i dÃ¹ng trong cÃ¡c tÃ¬nh huá»‘ng kháº©n cáº¥p nhÆ° bÃ£o, lÅ© lá»¥t, sáº¡t lá»Ÿ Ä‘áº¥t táº¡i Viá»‡t Nam.

### ğŸ¯ Má»¥c tiÃªu
- **Cáº£nh bÃ¡o sá»›m**: Dá»± bÃ¡o rá»§i ro thiÃªn tai báº±ng AI/ML
- **Cá»©u há»™ nhanh**: Káº¿t ná»‘i náº¡n nhÃ¢n vá»›i Ä‘á»™i cá»©u há»™ qua GPS
- **QuyÃªn gÃ³p dá»… dÃ ng**: Tiá»n máº·t, nhu yáº¿u pháº©m, cÃ´ng sá»©c
- **Hoáº¡t Ä‘á»™ng offline**: Sá»­ dá»¥ng Ä‘Æ°á»£c khi máº¥t máº¡ng

---

## âœ¨ TÃ­nh NÄƒng ChÃ­nh

### 1. ğŸš¨ Module SOS & Cá»©u Há»™

| TÃ­nh nÄƒng | MÃ´ táº£ |
|-----------|-------|
| **NÃºt SOS Kháº©n Cáº¥p** | Floating button, gá»­i vá»‹ trÃ­ GPS tá»©c thÃ¬ |
| **Offline Queue** | LÆ°u yÃªu cáº§u SOS khi máº¥t máº¡ng, tá»± Ä‘á»™ng gá»­i khi cÃ³ káº¿t ná»‘i |
| **Gá»i Nhanh** | NÃºt gá»i 113, 114, 115 trá»±c tiáº¿p |
| **Báº£n Ä‘á»“ Náº¡n nhÃ¢n** | Hiá»ƒn thá»‹ vÃ¹ng nguy hiá»ƒm vÃ  Ä‘iá»ƒm trÃº áº©n |
| **Chat Thá»i gian thá»±c** | LiÃªn láº¡c vá»›i Ä‘á»™i cá»©u há»™ |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ†˜  Gá»­i yÃªu cáº§u SOS                    â”‚
â”‚                                         â”‚
â”‚  ğŸ“ Vá»‹ trÃ­: 10.762, 106.660            â”‚
â”‚  ğŸ“ MÃ´ táº£: [Nháº­p tÃ¬nh huá»‘ng...]        â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ 113 â”‚  â”‚ 114 â”‚  â”‚ 115 â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                         â”‚
â”‚         [ Gá»¬I SOS NGAY ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ğŸ—ºï¸ Báº£n Äá»“ ThÃ´ng Minh

- **VÃ¹ng nguy hiá»ƒm**: Hiá»ƒn thá»‹ cÃ¡c khu vá»±c cÃ³ rá»§i ro cao (Ä‘á»/cam/vÃ ng)
- **Äiá»ƒm trÃº áº©n**: Shelter, bá»‡nh viá»‡n, trÆ°á»ng há»c
- **Geofencing**: Tá»± Ä‘á»™ng cáº£nh bÃ¡o khi vÃ o vÃ¹ng nguy hiá»ƒm
- **Routing**: TÃ¬m Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t Ä‘áº¿n nÆ¡i an toÃ n (OSRM)

### 3. ğŸ¤ Module QuyÃªn GÃ³p

#### ğŸ’µ QuyÃªn gÃ³p Tiá»n máº·t
- Chip nhanh: 50K, 100K, 200K, 500K, 1M
- Campaign Cards: Chiáº¿n dá»‹ch cá»©u trá»£ ná»•i báº­t
- QR Code: Chuyá»ƒn khoáº£n trá»±c tiáº¿p MTTQ

#### ğŸ“¦ QuyÃªn gÃ³p Nhu yáº¿u pháº©m
| Danh má»¥c | Icon |
|----------|------|
| Thá»±c pháº©m | ğŸš |
| NÆ°á»›c uá»‘ng | ğŸ’§ |
| Quáº§n Ã¡o | ğŸ‘• |
| Y táº¿ | ğŸ’Š |
| Thiáº¿t bá»‹ | ğŸ”¦ |
| KhÃ¡c | ğŸ“¦ |

#### ğŸ™‹ ÄÄƒng kÃ½ TÃ¬nh nguyá»‡n viÃªn
- Ká»¹ nÄƒng: Váº­n chuyá»ƒn, Y táº¿, Dá»n dáº¹p, Náº¥u Äƒn, Logistics
- Lá»‹ch sáºµn sÃ ng: Chá»n ngÃ y cÃ³ thá»ƒ tham gia
- SMS/Call thÃ´ng bÃ¡o

### 4. ğŸ¤– AI Dá»± BÃ¡o ThiÃªn Tai

#### MÃ´ hÃ¬nh ML
| Model | Algorithm | Use case |
|-------|-----------|----------|
| **Hazard Predictor** | XGBoost | Dá»± bÃ¡o rá»§i ro (1-5 sao) |
| **Alert Scorer** | Random Forest | Äiá»ƒm Æ°u tiÃªn cáº£nh bÃ¡o |
| **Duplicate Detector** | Sentence BERT | PhÃ¡t hiá»‡n tin trÃ¹ng láº·p |
| **Notification Timing** | Thompson Sampling | Tá»‘i Æ°u thá»i Ä‘iá»ƒm gá»­i |

#### Dá»¯ liá»‡u Training
- **63 tá»‰nh/thÃ nh** Viá»‡t Nam vá»›i hazard profile
- **Open-Meteo API**: Dá»¯ liá»‡u thá»i tiáº¿t real-time
- **NCHMF/DDMFC**: Nguá»“n chÃ­nh phá»§ (100% reliability)
- **50,000+ samples** cho training

### 5. ğŸ”” ThÃ´ng BÃ¡o ThÃ´ng Minh

- **Smart Batching**: Gá»™p 3-5 notification Ä‘á»ƒ trÃ¡nh spam
- **Cooldown**: 2 phÃºt giá»¯a má»—i láº§n gá»­i
- **Priority-based**: Critical â†’ gá»­i ngay, Low â†’ batch
- **FCM Integration**: Firebase Cloud Messaging

### 6. ğŸ“¶ Cháº¿ Äá»™ Offline

- **Cáº©m nang sinh tá»“n**: HÆ°á»›ng dáº«n á»©ng phÃ³ thiÃªn tai
- **SOS Queue**: LÆ°u vÃ  gá»­i khi cÃ³ máº¡ng
- **Local Storage**: Danh báº¡ kháº©n cáº¥p, lá»‹ch sá»­

---

## ğŸ—ï¸ Kiáº¿n TrÃºc

### Clean Architecture

```
lib/
â”œâ”€â”€ core/                   # Constants, theme, utilities
â”œâ”€â”€ data/                   # Repositories, Services, DTOs
â”‚   â”œâ”€â”€ repositories/       # Firebase implementations
â”‚   â””â”€â”€ services/           # Business logic services
â”œâ”€â”€ domain/                 # Entities, Use cases
â”‚   â”œâ”€â”€ entities/           # Data models
â”‚   â””â”€â”€ services/           # Domain services (Scoring, Dedup)
â””â”€â”€ presentation/           # UI Layer
    â”œâ”€â”€ bindings/           # GetX bindings
    â”œâ”€â”€ controllers/        # GetX controllers
    â””â”€â”€ features/           # Screens by feature
        â”œâ”€â”€ admin/
        â”œâ”€â”€ auth/
        â”œâ”€â”€ donation/
        â”œâ”€â”€ victim/
        â””â”€â”€ volunteer/
```

### CÃ´ng nghá»‡

| Layer | Technology |
|-------|------------|
| **Frontend** | Flutter 3.24.x, Dart 3.5.x |
| **State Management** | GetX |
| **Backend** | Firebase (Auth, Firestore, Storage, FCM) |
| **AI Service** | Python, FastAPI, Scikit-learn, XGBoost |
| **Maps** | flutter_map + OpenStreetMap |
| **Routing** | OSRM (Open Source Routing Machine) |

---

## ğŸš€ CÃ i Äáº·t

### YÃªu cáº§u
- Flutter SDK 3.24.x+
- Dart 3.5.x+
- Python 3.9+ (cho AI Service)
- Firebase project

### 1. Clone Repository

```bash
git clone https://github.com/PhamMinhKha0710/AppThienTai.git
cd AppThienTai
```

### 2. Cháº¡y Flutter App

```bash
# CÃ i Ä‘áº·t dependencies
flutter pub get

# Cháº¡y á»©ng dá»¥ng
flutter run

# Build APK
flutter build apk --release
```

### 3. Cháº¡y AI Service

```bash
cd ai_service

# Táº¡o virtual environment
python -m venv venv
source venv/bin/activate  # Linux/Mac
# hoáº·c: venv\Scripts\activate  # Windows

# CÃ i Ä‘áº·t dependencies
pip install -r requirements.txt

# Train model (láº§n Ä‘áº§u)
python train_hazard_model.py

# Cháº¡y server
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**API Docs**: http://localhost:8000/docs

---

## ğŸ¤– AI Service

### API Endpoints

| Endpoint | Method | MÃ´ táº£ |
|----------|--------|-------|
| `/api/v1/health` | GET | Health check |
| `/api/v1/hazard/predict` | POST | Dá»± bÃ¡o rá»§i ro thiÃªn tai |
| `/api/v1/hazard/zones` | GET | Láº¥y danh sÃ¡ch vÃ¹ng nguy hiá»ƒm |
| `/api/v1/score` | POST | TÃ­nh Ä‘iá»ƒm Æ°u tiÃªn cáº£nh bÃ¡o |
| `/api/v1/duplicate/check` | POST | Kiá»ƒm tra tin trÃ¹ng láº·p |
| `/api/v1/timing/recommend` | POST | Gá»£i Ã½ thá»i Ä‘iá»ƒm gá»­i notification |

### VÃ­ dá»¥ Request

```bash
# Dá»± bÃ¡o rá»§i ro
curl -X POST "http://localhost:8000/api/v1/hazard/predict" \
  -H "Content-Type: application/json" \
  -d '{
    "lat": 16.0544,
    "lng": 108.2022,
    "month": 10,
    "hazard_type": "flood"
  }'

# Response:
{
  "risk_level": 4,
  "risk_label": "high",
  "confidence": 0.85,
  "province": "ÄÃ  Náºµng",
  "explanation": "Nguy cÆ¡ ngáº­p lá»¥t má»©c Cao táº¡i ÄÃ  Náºµng"
}
```

---

## ğŸ“Š Thuáº­t ToÃ¡n

| Thuáº­t toÃ¡n | File | Má»¥c Ä‘Ã­ch |
|------------|------|----------|
| Multi-factor Scoring | `alert_scoring_service.dart` | Äiá»ƒm Æ°u tiÃªn cáº£nh bÃ¡o |
| Exponential Decay | `alert_scoring_service.dart` | Suy giáº£m theo thá»i gian |
| Haversine Distance | `geofencing_service.dart` | TÃ­nh khoáº£ng cÃ¡ch GPS |
| OSRM Routing | `routing_service.dart` | TÃ¬m Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t |
| XGBoost | `hazard_predictor.py` | Dá»± bÃ¡o thiÃªn tai |
| Thompson Sampling | `notification_timing.py` | Tá»‘i Æ°u notification |

ğŸ“š Chi tiáº¿t: [docs/algorithms/README.md](docs/algorithms/README.md)

---

## ğŸ“ Cáº¥u TrÃºc ThÆ° Má»¥c

```
AppThienTai/
â”œâ”€â”€ lib/                    # Flutter source code
â”œâ”€â”€ assets/                 # Images, fonts, JSON
â”œâ”€â”€ ai_service/            # Python AI backend
â”‚   â”œâ”€â”€ models/            # ML models
â”‚   â”œâ”€â”€ data_collectors/   # Data collection scripts
â”‚   â””â”€â”€ data/              # Training data & model files
â”œâ”€â”€ docs/                  # Documentation
â”‚   â”œâ”€â”€ algorithms/        # Thuáº­t toÃ¡n chi tiáº¿t
â”‚   â””â”€â”€ handover_document/ # BÃ n giao ká»¹ thuáº­t
â”œâ”€â”€ test/                  # Unit & Widget tests
â””â”€â”€ android/ios/          # Platform-specific code
```

---

## ğŸ—“ï¸ Roadmap

### âœ… ÄÃ£ hoÃ n thÃ nh
- [x] SOS Module vá»›i GPS & Offline queue
- [x] Báº£n Ä‘á»“ vÃ¹ng nguy hiá»ƒm
- [x] QuyÃªn gÃ³p tiá»n/nhu yáº¿u pháº©m
- [x] AI Hazard Prediction (XGBoost)
- [x] Smart Notification Batching
- [x] Geofencing Service

### ğŸš§ Äang phÃ¡t triá»ƒn
- [ ] Video call vá»›i Ä‘á»™i cá»©u há»™
- [ ] TÃ­ch há»£p VNPay/Momo
- [ ] Push notification nÃ¢ng cao

### ğŸ“‹ Káº¿ hoáº¡ch tÆ°Æ¡ng lai
- [ ] IoT Sensors integration
- [ ] Blockchain donation tracking
- [ ] Multi-language support
- [ ] Satellite data for flood prediction

---

## ğŸ¤ ÄÃ³ng GÃ³p

ChÃºng tÃ´i hoan nghÃªnh má»i Ä‘Ã³ng gÃ³p! Vui lÃ²ng:

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Táº¡o Pull Request

---

## ğŸ“„ License

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¡t hÃ nh dÆ°á»›i giáº¥y phÃ©p **MIT License**.

---

## ğŸ‘¥ Team

| Role | Name |
|------|------|
| **Developer** | Pháº¡m Minh Kha |
| **AI/ML** | AppThienTai Team |

---

## ğŸ“ LiÃªn Há»‡

- **GitHub**: [PhamMinhKha0710/AppThienTai](https://github.com/PhamMinhKha0710/AppThienTai)
- **Email**: support@appthientai.vn

---

<p align="center">
  Made with â¤ï¸ for Vietnam Disaster Relief
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Version-1.0.0-blue" alt="Version"/>
  <img src="https://img.shields.io/badge/Status-Active-green" alt="Status"/>
</p>
